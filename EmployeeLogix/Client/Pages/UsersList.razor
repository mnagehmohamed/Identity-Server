@page "/Users"

@using System.ComponentModel.DataAnnotations
@using EmployeeLogix.Shared.Models;


<PageTitle>Users</PageTitle>

<div>
    <div class="d-flex align-center justify-space-between mt-0">
        <MudText Align="Align.Start" Typo="Typo.h5">Users</MudText>
        </div>

        <MudPaper Class="pa-4 mt-4"
              Style="margin-bottom:10px">
            <MudButton DisableElevation
                   Variant="Variant.Filled"
                   Color="Color.Info"
                   Class="me-2"
                   StartIcon="@Icons.Material.Filled.Add"
                   IconColor="Color.Surface"
                  >New</MudButton>
            <MudButton DisableElevation
                   Variant="Variant.Filled"
                   StartIcon="@Icons.Material.Filled.Refresh"
                   IconColor="Color.Surface"
                   Color="Color.Primary"
                   OnClick="(()=>LoadDataList())">Refresh</MudButton>

            </MudPaper>
    


    <MudTable Items="@users"
              T="ApplicationUser"
              Dense="true"
              Hover="true"
              Bordered="true"
              Striped="true"
              Breakpoint="Breakpoint.MdAndDown"
                FixedHeader
              Height="70vh"
              Style="margin-bottom:20px">
        <NoRecordsContent>
            <MudText>No Data Found</MudText>
        </NoRecordsContent>
        <ToolBarContent>
            <MudGrid>

                    <MudItem xs="12" sm="12" md="4" Class="py-1">
                        <MudTextField T=string
                                  Placeholder="Search By Email"
                                  TextChanged="DoTableSearch"
                                  Adornment="Adornment.Start"
                                  AdornmentIcon="@Icons.Material.Filled.PersonSearch"
                                  IconSize="Size.Medium"
                                  AdornmentColor="Color.Default"
                                  DebounceInterval="250"
                                  MaxLength="50"
                                  Variant="Variant.Outlined"
                                  Margin="Margin.Dense"
                                  Class="pt-3"
                                                Clearable
                                                HelperTextOnFocus
                                  HelperText="Please Search Here">
                        </MudTextField>
                        </MudItem>
                


            </MudGrid>
            <MudSpacer />
            <MudSpacer />
            <MudSpacer />
            <MudSpacer />
            <MudSpacer />
            <MudSpacer />
            <MudSpacer />
        </ToolBarContent>
        <HeaderContent>
            <MudTh>User Name</MudTh>
            <MudTh>Email</MudTh>

            <MudTh>Actions</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd>@context.UserName </MudTd>

            <MudTd>@context.Email</MudTd>



 




            <MudTd id="Active">
                <MudStack Row
                          Justify=Justify.Center
                          Spacing=2>
                    <MudTooltip Placement="Placement.Bottom"
                                        Arrow
                                Text=Info
                                RootStyle="width: fit-content;"
                                        Inline>

                        <MudButton id="info_button" StartIcon="@Icons.Material.Filled.Info"
                                   Size=Size.Small
                                   Color=Color.Default
                                   Variant="Variant.Filled"
                                   OnClick="(()=>DoInfoAction(context))">
                           Info

                        </MudButton>
                    </MudTooltip>
                    <MudTooltip Placement="Placement.Bottom"
                                        Arrow
                                Text="Edit"
                                RootStyle="width: fit-content;"
                                        Inline>
                        <MudButton StartIcon="@Icons.Material.Filled.Edit"
                                   Size=Size.Small
                                   Color=Color.Primary
                                   Variant="Variant.Filled"
                                   OnClick="()=>DoUpdateActions(context)">
                           Edit
                        </MudButton>
                    </MudTooltip>
                    <MudTooltip Placement="Placement.Bottom"
                                        Arrow
                                Text="Delete"
                                RootStyle="width: fit-content;"
                                        Inline>
                        <MudButton  StartIcon="@Icons.Material.Filled.Delete"
                                   Color=Color.Error
                                   Size=Size.Small
                                   Variant="Variant.Filled"
                                   OnClick="()=>DoDeleteAction(context)">
                            Delete
                        </MudButton>
                    </MudTooltip>

                </MudStack>

            </MudTd>
        </RowTemplate>
        <PagerContent>
            <MudTablePager HorizontalAlignment="HorizontalAlignment.Center" />
        </PagerContent>
    </MudTable>
</div>
<style>

    .mud-table-striped .mud-table-container .mud-table-root .mud-table-body .mud-table-row:nth-of-type(even) {
        background-color: #F1F1F1;
    }

        .mud-table-striped .mud-table-container .mud-table-root .mud-table-body .mud-table-row:nth-of-type(even) td {
            color: #000
        }

        .mud-table-striped .mud-table-container .mud-table-root .mud-table-body .mud-table-row:nth-of-type(even):hover {
            background-color: #F1F1F1;
        }

    .mud-table-root .mud-table-body:last-child .mud-table-row:last-child .mud-table-cell {
        border-bottom: 1px solid #ffffff1e;
    }

    .mud-table-cell {
        border: 1px solid #ffffff1e;
    }

    #info_button {
        background: #17a2b8;
    }

        #info_button span.mud-button-label {
            color: #fff;
        }
</style>